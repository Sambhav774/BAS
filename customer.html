<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customer Portal - Book Automation Software</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="styles2.css">
    <style>
        #billSection {
            display: none;
            margin-top: 20px;
            border: 1px solid #ccc;
            padding: 15px;
            background-color: #f9f9f9;
        }
    </style>
</head>
<body>
    <header>
        <h1>Available Books</h1>
        <nav>
            <a href="feedback.html">Give Feedback</a>
            <a href="request.html">Request a Book</a>
        </nav>
    </header>

    <main>
        <section id="availableBooks">
            <h2>Select a Book to Buy</h2>
            <ul id="bookList">
                <!-- Book items will be populated here -->
            </ul>
        </section>

        <section id="buySection" style="display:none;">
            <h2>Buy Selected Book</h2>
            <form id="buyForm">
                <p id="selectedBook"></p>
                <label for="customerName">Name:</label>
                <input type="text" id="customerName" name="customerName" required><br><br>
                
                <label for="customerEmail">Email:</label>
                <input type="email" id="customerEmail" name="customerEmail" required><br><br>

                <label for="creditCard">Credit Card Number:</label>
                <input type="text" id="creditCard" name="creditCard" required><br><br>
                <button type="submit">Buy Book</button>
            </form>
            <p id="buyMessage"></p>
        </section>

        <section id="billSection">
            <h2>Your Bill</h2>
            <p id="billDetails"></p>
        </section>
    </main>

    <footer>
        <p>Book Automation Software &copy; 2024</p>
    </footer>

    <script>
        // Load books from localStorage or set predefined ones
        const books = JSON.parse(localStorage.getItem('books')) || [
            { title: 'The Great Gatsby', price: '$10.99', image: 'images/great-gatsby.jpg' },
            { title: '1984', price: '$8.99', image: 'images/1984.jpg' },
            { title: 'To Kill a Mockingbird', price: '$12.99', image: 'images/to-kill-a-mockingbird.jpg' },
            { title: 'The Catcher in the Rye', price: '$9.99', image: 'images/catcher-in-the-rye.jpg' },
            { title: 'Moby Dick', price: '$15.50', image: 'images/moby-dick.jpg' }
        ];

        // Load available books
        document.addEventListener('DOMContentLoaded', function() {
            const bookList = document.getElementById('bookList');
            books.forEach((book, index) => {
                const li = document.createElement('li');
                li.innerHTML = `
                    <img src="${book.image}" alt="${book.title}" style="width:100px;height:150px;"><br>
                    ${book.title} - ${book.price}
                    <button data-index="${index}" class="selectBook">Select</button>
                `;
                bookList.appendChild(li);
            });
        });

        // Handle book selection
        document.getElementById('bookList').addEventListener('click', function(e) {
            if (e.target.classList.contains('selectBook')) {
                const index = e.target.getAttribute('data-index');
                const selectedBook = books[index];
                document.getElementById('selectedBook').textContent = `You have selected: ${selectedBook.title} for ${selectedBook.price}`;
                document.getElementById('buySection').style.display = 'block';
            }
        });

        // Handle the buy form submission
        document.getElementById('buyForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const customerName = document.getElementById('customerName').value;
            const customerEmail = document.getElementById('customerEmail').value;
            const creditCard = document.getElementById('creditCard').value;
            const selectedBookTitle = document.getElementById('selectedBook').textContent;

            const selectedBookPrice = selectedBookTitle.split('for ')[1];

            // Display the bill
            document.getElementById('billDetails').innerHTML = `
                <strong>Name:</strong> ${customerName}<br>
                <strong>Email:</strong> ${customerEmail}<br>
                <strong>Book Title:</strong> ${selectedBookTitle.split(': ')[1]}<br>
                <strong>Price:</strong> ${selectedBookPrice}<br>
                <strong>Credit Card Number:</strong> ${creditCard}
            `;
            document.getElementById('billSection').style.display = 'block';

            // Clear selection
            document.getElementById('buySection').style.display = 'none';
            document.getElementById('buyForm').reset();
        });
    </script>
</body>
</html>
